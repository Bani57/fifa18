# Libraries
import matplotlib.pyplot as plt
import pandas as pd
from math import pi

if __name__ == "__main__":
    teams = {
        "Real Madrid CF": [0.8031249999999999, 0.8677083332500001, 0.7366666666499999, 0.68544303815, 0.73732394355,
                           0.7631944446, 0.6608974357999999, 0.7207692308],
        "Juventus": [0.7958333333000001, 0.8208333333500001, 0.7560000001, 0.6620253164000001, 0.6725352111000001,
                     0.7444444444499998, 0.68397435895, 0.75999999995],
        "FC Bayern Munich": [0.7958333333, 0.8354166666000002, 0.73133333335, 0.7303797469, 0.72183098575,
                             0.75486111115, 0.6243589743, 0.71307692315],
        "FC Barcelona": [0.79375000005, 0.8520833333000002, 0.73866666675, 0.7354430378499999, 0.75704225345,
                         0.7916666666000001, 0.6358974357999999, 0.6799999999999999],
        "Chelsea": [0.7791666666999999, 0.8270833333000001, 0.7513333333, 0.6829113924, 0.6718309859,
                    0.7430555555499999, 0.64294871795, 0.7523076923],
        "Manchester United": [0.7708333333500001, 0.81770833335, 0.70800000005, 0.6848101265500001, 0.70704225345,
                              0.7270833333000001, 0.6653846154, 0.7876923077500001],
        "Paris Saint-Germain": [0.76770833335, 0.8291666667000002, 0.7313333334, 0.6930379747000001, 0.7169014083,
                                0.78263888885, 0.6333333334, 0.7099999999499998],
        "Atletico Madrid": [0.7635416666499999, 0.8218750001, 0.7486666665499999, 0.6943037974500001, 0.69154929565,
                            0.73888888885, 0.6070512819999999, 0.7076923077],
        "Manchester City": [0.76041666665, 0.828125, 0.7493333333500001, 0.6867088607999999, 0.7105633802,
                            0.75347222225, 0.6224358974500002, 0.7338461538500001],
        "Arsenal": [0.75312499995, 0.7822916665999999, 0.6760000000999999, 0.6607594937000001, 0.6830985915500001,
                    0.7173611111500001, 0.6070512819999999, 0.7430769232000001]
    }

    italian_league = {
        "Juventus": [0.7958333333000001, 0.8208333333500001, 0.7560000001, 0.6620253164000001, 0.6725352111000001,
                     0.7444444444499998, 0.68397435895, 0.75999999995],
        "Napoli": [0.7208333332500001, 0.7802083333000001, 0.7480000001500001, 0.59367088605, 0.6309859153999999,
                   0.6993055555499998, 0.6666666667, 0.67230769235],
        "Roma": [0.71458333325, 0.75416666665, 0.7026666666000001, 0.61708860765, 0.6211267604999999,
                 0.6861111111000001, 0.6679487179999999, 0.73000000005],
        "Milan": [0.69375, 0.7739583333000001, 0.682, 0.5981012658500001, 0.60492957745, 0.6715277777499999,
                  0.6576923076999999, 0.71923076925],
        "Inter": [0.6874999999999999, 0.7510416666499998, 0.7326666666, 0.6512658227999999, 0.63732394365,
                  0.70763888885, 0.63525641025, 0.6923076923],
        "Lazio": [0.68020833325, 0.7333333333, 0.6993333334999999, 0.6284810126, 0.60422535205, 0.6784722222,
                  0.6378205128000001, 0.72076923085],
        "Fiorentina": [0.6364583333499999, 0.73229166655, 0.68000000005, 0.6075949367500001, 0.57957746475,
                       0.65763888895,
                       0.5685897434499999, 0.6892307691999999],
        "Torino": [0.6343749999999999, 0.70312499995, 0.7066666665500001, 0.5556962025499999, 0.5992957746500001,
                   0.6805555555, 0.62564102565, 0.69461538455]
    }

    french_league = {
        "Paris Saint-Germain": [0.76770833335, 0.8291666667000002, 0.7313333334, 0.6930379747000001, 0.7169014083,
                                0.78263888885, 0.6333333334, 0.7099999999499998],
        "AS Monaco": [0.6916666665500002, 0.77500000005, 0.6853333334000001, 0.6569620253, 0.6338028168500001,
                      0.7076388888999999, 0.5865384617, 0.70076923075],
        "Olympique de Marseille": [0.6552083333499998, 0.7031249999999999, 0.66466666665, 0.64493670885,
                                   0.6345070422499999, 0.67222222215, 0.5993589745, 0.7123076922500001],
        "OGC Nice": [0.640625, 0.7416666666999999, 0.6866666667, 0.62025316455, 0.6598591549000001, 0.7006944444500001,
                     0.6096153846000001, 0.6869230769000001],
        "Olympique Lyonnais": [0.6249999999999999, 0.7239583333499998, 0.71666666665, 0.58734177205, 0.5887323944000002,
                               0.6722222222500001, 0.6051282053, 0.72076923075],
        "Girondins de Bordeaux": [0.59270833335, 0.67812499995, 0.6560000000000001, 0.58227848085, 0.6091549296500001,
                                  0.67291666665, 0.5628205128, 0.6569230768],
        "AS Saint-Etienne": [0.5916666666000001, 0.6583333333, 0.69466666665, 0.5981012657499998, 0.60281690145,
                             0.6458333333, 0.6307692308499999, 0.6907692308],
        "Toulouse FC": [0.58124999995, 0.6895833333000001, 0.6546666666500001, 0.58734177205, 0.5894366197500001,
                        0.6319444444, 0.5743589742999999, 0.69307692305]
    }

    spanish_league = {
        "Real Madrid CF": [0.8031249999999999, 0.8677083332500001, 0.7366666666499999, 0.68544303815, 0.73732394355,
                           0.7631944446, 0.6608974357999999, 0.7207692308],
        "FC Barcelona": [0.79375000005, 0.8520833333000002, 0.73866666675, 0.7354430378499999, 0.75704225345,
                         0.7916666666000001, 0.6358974357999999, 0.6799999999999999],
        "Atletico Madrid": [0.7635416666499999, 0.8218750001, 0.7486666665499999, 0.6943037974500001, 0.69154929565,
                            0.73888888885, 0.6070512819999999, 0.7076923077],
        "Sevilla FC": [0.69895833325, 0.7343749999000001, 0.6086666666499999, 0.6620253164000001, 0.70140845065,
                       0.6930555555000001, 0.6108974359499999, 0.6999999999500001],
        "Villarreal CF": [0.690625, 0.7416666667, 0.68600000005, 0.6499999999, 0.6415492956999999, 0.68888888895,
                          0.61410256415, 0.6869230769],
        "Athletic Club de Bilbao": [0.6822916667499999, 0.7322916667499999, 0.6446666666999998, 0.6265822785,
                                    0.6338028169000001, 0.6548611110500001, 0.6403846153499999, 0.7115384614999999],
        "Real Sociedad": [0.6729166666999999, 0.7489583333, 0.61933333325, 0.614556962, 0.64788732395,
                          0.6638888889500001, 0.5794871794, 0.5915384616],
        "RCD Espanyol": [0.6572916666500002, 0.70520833335, 0.63133333325, 0.6006329113000001, 0.6330985914999999,
                         0.6541666667000002, 0.6320512819999999, 0.6715384615500002]
    }

    english_league = {
        "Chelsea": [0.7791666666999999, 0.8270833333000001, 0.7513333333, 0.6829113924, 0.6718309859,
                    0.7430555555499999, 0.64294871795, 0.7523076923],
        "Manchester United": [0.7708333333500001, 0.81770833335, 0.70800000005, 0.6848101265500001, 0.70704225345,
                              0.7270833333000001, 0.6653846154, 0.7876923077500001],
        "Manchester City": [0.76041666665, 0.828125, 0.7493333333500001, 0.6867088607999999, 0.7105633802,
                            0.75347222225, 0.6224358974500002, 0.7338461538500001],
        "Arsenal": [0.75312499995, 0.7822916665999999, 0.6760000000999999, 0.6607594937000001, 0.6830985915500001,
                    0.7173611111500001, 0.6070512819999999, 0.7430769232000001],
        "Tottenham Hotspur": [0.74375, 0.8072916667000001, 0.7379999998999999, 0.69873417725, 0.6894366196500001,
                              0.7305555554500001, 0.6858974360500001, 0.7715384615499998],
        "Liverpool": [0.72395833325, 0.7812499999500001, 0.7753333332999999, 0.6987341771999999, 0.68732394355,
                      0.7729166665499999, 0.5942307693000001, 0.71692307695],
        "Everton": [0.7041666666500002, 0.7479166667999999, 0.6833333334, 0.6512658228499999, 0.6732394366000001,
                    0.7104166666, 0.6467948718, 0.7453846155000001],
        "West Ham United": [0.67083333335, 0.70000000005, 0.6493333332500001, 0.6341772151499999, 0.5999999999500001,
                            0.66666666665, 0.6397435898499999, 0.7484615384]
    }

    german_league = {
        "FC Bayern Munich": [0.7958333333, 0.8354166666000002, 0.73133333335, 0.7303797469, 0.72183098575,
                             0.75486111115, 0.6243589743, 0.71307692315],
        "Borussia Dortmund": [0.7427083333499999, 0.7916666665500001, 0.74933333335, 0.67974683545, 0.7084507040999999,
                              0.7569444444500001, 0.6051282051500001, 0.6584615384000001],
        "Bayer 04 Leverkusen": [0.665625, 0.753125, 0.712, 0.6297468353, 0.6338028168500001, 0.6854166665999999,
                                0.5673076922, 0.7184615385500001],
        "Borussia Monchengladbach": [0.6614583332500001, 0.7197916666, 0.6879999999, 0.63291139245, 0.6809859154000002,
                                     0.7013888888499998, 0.57500000015, 0.6807692307500001],
        "FC Schalke 04": [0.65208333335, 0.7343750000000001, 0.7033333333, 0.6291139241, 0.6091549296000001,
                          0.68888888895, 0.5705128205500001, 0.6553846154000001],
        "VfL Wolfsburg": [0.6500000000499999, 0.7333333334499998, 0.6926666666500003, 0.6145569620500001,
                          0.6232394365999999, 0.6715277778499998, 0.6044871795500001, 0.7176923075999999],
        "TSG 1899 Hoffenheim": [0.64375, 0.71354166675, 0.63533333325, 0.6234177215500001, 0.5985915493,
                                0.6652777776000001, 0.58205128185, 0.7061538462000001],
        "RB Leipzig": [0.6343750001, 0.72708333335, 0.71000000005, 0.590506329, 0.59929577455, 0.67291666655,
                       0.5237179488000001, 0.67538461555]
    }

    leagues = {
        "English Premier League": [0.7395254629583328, 0.7928240740749999, 0.7489259259388896, 0.7053797468388883,
                                   0.6952269170499996, 0.7556327160083334, 0.680199430216667, 0.8093162393333332],
        "Spanish Primera Division": [0.7289930555555562, 0.7953703703750004, 0.7362222222222221, 0.7001406469638884,
                                     0.7071987480166665, 0.7481481481555561, 0.6589031339083335, 0.7433333333111102],
        "Italian Serie A": [0.6891203703583325, 0.7630787036694449, 0.7464074074027768, 0.6410337552527777,
                            0.634467918605555, 0.7214891975250001, 0.6543447293444443, 0.7469230769277772],
        "French Ligue 1": [0.6491898148083326, 0.7306134259111117, 0.7341111111083333, 0.6492264415861112,
                           0.6540297339750001, 0.7143518518583325, 0.6332621082805555, 0.7381196581027781],
        "German Bundesliga": [0.6339699074166655, 0.6990162037027773, 0.680814814811111, 0.6153305203916662,
                              0.6133411580499997, 0.6701003086361111, 0.5702991453083327, 0.6815811965944447]
    }


    def get_stat(dict_stats, stat_num):
        result = []
        for key in dict_stats.keys():
            result.append(dict_stats[key][stat_num])
        return result


    dictionaries = (teams, leagues, italian_league, french_league, spanish_league, english_league, german_league)
    titles = ("Comparison of the top 10 teams", "Comparison of the top 5 leagues", "Italian Serie A", "French Ligue 1", "Spanish Primera Division",
              "English Premier League", "German Bundesliga")
    for i in range(0, len(dictionaries)):
        # Set data
        dictionary = dictionaries[i]
        df = pd.DataFrame({
            'group': dictionary.keys(),
            "Overall": get_stat(dictionary, 0),
            "Potential": get_stat(dictionary, 1),
            "Pace": get_stat(dictionary, 2),
            "Shooting": get_stat(dictionary, 3),
            "Passing": get_stat(dictionary, 4),
            "Dribbling": get_stat(dictionary, 5),
            "Defending": get_stat(dictionary, 6),
            "Physical": get_stat(dictionary, 7)
        })

        # ------- PART 1: Create background
        # number of variable
        categories = list(df)[:8]
        N = len(categories)

        # What will be the angle of each axis in the plot? (we divide the plot / number of variable)
        angles = [n / float(N) * 2 * pi for n in range(N)]
        angles += angles[:1]

        # Initialise the spider plot
        my_dpi = 96
        plt.figure(figsize=(1280.0 / my_dpi, 720.0 / my_dpi), dpi=my_dpi)
        ax = plt.subplot(111, polar=True)
        plt.title(titles[i])

        # If you want the first axis to be on top:
        ax.set_theta_offset(pi / 2)
        ax.set_theta_direction(-1)

        # Draw one axe per variable + add labels labels yet
        plt.xticks(angles[:-1], categories)

        # Draw ylabels
        ax.set_rlabel_position(0)
        plt.yticks([x * 0.1 for x in range(0, 10)], [str(x * 0.1) for x in range(0, 10)], color="grey", size=7)
        plt.ylim(0, 1)

        # ------- PART 2: Add plots

        # Plot each individual = each line of the data
        # I don't do a loop, because plotting more than 3 groups makes the chart unreadable

        for j in range(0, len(dictionary)):
            values = df.loc[j].drop('group').values.flatten().tolist()
            values += values[:1]
            ax.plot(angles, values, linewidth=1, linestyle='solid', label=dictionary.keys()[j])
            # ax.fill(angles, values, alpha=0.01)

        # Add legend
        plt.legend(loc='upper right', bbox_to_anchor=(1.5, 1.05))
        # plt.show()
        plt.savefig("plots/polygon_" + str(i + 1) + ".png", bbox_inches='tight')
